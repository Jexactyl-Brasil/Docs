"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9317],{3905:(e,a,r)=>{r.d(a,{Zo:()=>u,kt:()=>y});var t=r(7294);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function o(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?o(Object(r),!0).forEach((function(a){n(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function l(e,a){if(null==e)return{};var r,t,n=function(e,a){if(null==e)return{};var r,t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||(n[r]=e[r]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var i=t.createContext({}),c=function(e){var a=t.useContext(i),r=a;return e&&(r="function"==typeof e?e(a):s(s({},a),e)),r},u=function(e){var a=c(e.components);return t.createElement(i.Provider,{value:a},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var r=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(r),m=n,y=p["".concat(i,".").concat(m)]||p[m]||d[m]||o;return r?t.createElement(y,s(s({ref:a},u),{},{components:r})):t.createElement(y,s({ref:a},u))}));function y(e,a){var r=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var o=r.length,s=new Array(o);s[0]=m;var l={};for(var i in a)hasOwnProperty.call(a,i)&&(l[i]=a[i]);l.originalType=e,l[p]="string"==typeof e?e:n,s[1]=l;for(var c=2;c<o;c++)s[c]=r[c];return t.createElement.apply(null,s)}return t.createElement.apply(null,r)}m.displayName="MDXCreateElement"},2672:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var t=r(7462),n=(r(7294),r(3905));const o={sidebar_position:5},s="Inicializador do Jexactyl",l={unversionedId:"jexactyl/Instala\xe7\xe3o/queue-workers",id:"jexactyl/Instala\xe7\xe3o/queue-workers",title:"Inicializador do Jexactyl",description:"*",source:"@site/docs/jexactyl/1 - Instala\xe7\xe3o/queue-workers.md",sourceDirName:"jexactyl/1 - Instala\xe7\xe3o",slug:"/jexactyl/Instala\xe7\xe3o/queue-workers",permalink:"/docs/jexactyl/Instala\xe7\xe3o/queue-workers",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/jexactyl/1 - Instala\xe7\xe3o/queue-workers.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Configura\xe7\xe3o do ambiente",permalink:"/docs/jexactyl/Instala\xe7\xe3o/environment"},next:{title:"Configurar SSL",permalink:"/docs/jexactyl/Servidor Web/setup-ssl"}},i={},c=[{value:"Crontab",id:"crontab",level:3},{value:"Systemd Queue Worker",id:"systemd-queue-worker",level:3},{value:"Ativar Queue Worker",id:"ativar-queue-worker",level:3}],u={toc:c},p="wrapper";function d(e){let{components:a,...r}=e;return(0,n.kt)(p,(0,t.Z)({},u,r,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"inicializador-do-jexactyl"},"Inicializador do Jexactyl"),(0,n.kt)("hr",null),(0,n.kt)("h3",{id:"crontab"},"Crontab"),(0,n.kt)("p",null,"A primeira coisa que precisamos fazer \xe9 criar um novo cronjob que seja executado a cada minuto para processar tarefas espec\xedficas do Jexactyl, como limpeza de sess\xe3o e envio de tarefas agendadas para daemons.Usaremos ",(0,n.kt)("inlineCode",{parentName:"p"},"Nano")," como editor."),(0,n.kt)("p",null,"Use o comando a baixo e digite 1 para selecionar o editor de texto nano."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo crontab -e\n\n")),(0,n.kt)("p",null,"Em seguida, cole essa linha para adicionar o Cron de tarefas da jexactyl."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"* * * * * php /var/www/jexactyl/artisan schedule:run >> /dev/null 2>&1\n")),(0,n.kt)("p",null,"E por ultimo, cole essa linha para adicionar o Cron de Renova\xe7\xf5es do Jexactyl"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"0 0 * * * php /var/www/jexactyl/artisan p:schedule:renewal >> /dev/null 2>&1\n")),(0,n.kt)("hr",null),(0,n.kt)("h3",{id:"systemd-queue-worker"},"Systemd Queue Worker"),(0,n.kt)("p",null,"Em seguida, voc\xea precisa criar um novo trabalhador systemd para manter nosso processo de fila em execu\xe7\xe3o em segundo plano. Essa fila \xe9 respons\xe1vel por enviar e-mails e lidar com muitas outras tarefas em segundo plano para o Jexactyl."),(0,n.kt)("p",null,"Agora criaremos um arquivo chamado ",(0,n.kt)("inlineCode",{parentName:"p"},"panel.service")," na pasta /etc/systemd/system/."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo nano /etc/systemd/system/panel.service\n")),(0,n.kt)("p",null,"Ap\xf3s isso, cole o texto abaixo dentro do arquivo que acabamos de criar."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# Jexactyl Queue Worker File\n# ----------------------------------\n\n[Unit]\nDescription=Jexactyl Queue Worker\n\n[Service]\nUser=www-data\nGroup=www-data\nRestart=always\nExecStart=/usr/bin/php /var/www/jexactyl/artisan queue:work --queue=high,standard,low --sleep=3 --tries=3\nStartLimitInterval=180\nStartLimitBurst=30\nRestartSec=5s\n\n[Install]\nWantedBy=multi-user.target\n")),(0,n.kt)("h3",{id:"ativar-queue-worker"},"Ativar Queue Worker"),(0,n.kt)("p",null,"Por fim, ative o servi\xe7o do painel jexactyl que acabamos de criar, bem como o servi\xe7o redis, para iniciar e executar na inicializa\xe7\xe3o."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl enable --now panel.service\nsudo systemctl enable --now redis-server\n")))}d.isMDXComponent=!0}}]);